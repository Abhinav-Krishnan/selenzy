<!doctype html>
<title>Selenzy | Results </title>
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='resources/css/style_results.css') }}">
<script src="{{url_for('static', filename='vendors/jquery/jquery-3.1.1.js')}}"></script>
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='vendors/jquery-ui-1.12.1.custom/jquery-ui.css')}}"></link>
<script src="{{url_for('static', filename='vendors/jquery-ui-1.12.1.custom/jquery-ui.js')}}"></script>
<script src="{{url_for('static', filename='resources/js/results.js')}}"></script>


<div class=page>
  <h1>Results</h1>
  <div style="float: left;" class="Navigate">
    </div>
  <div style="float: right;" class="Return"><a href="/">[New query]</a></div>
  <div style="clear: both;"></div>
  <h2></h2>
    {{ tables|safe }}

</div>
<script>
var header2 = document.getElementsByTagName('h2')[0];
var navigate = document.getElementsByClassName('Navigate')[0];
var rheaTag = document.createElement('a');
var csvTag = document.createElement('a');
var csvlink = "/results/{{sessionid}}/files/{{csvfile}}";
var fastaTag = document.createElement('a');
var fastalink = "/results/{{sessionid}}/files/sequences.fasta";
var msaTag = document.createElement('a');
var msalink = "/results/{{sessionid}}/files/sequences_score.html";
var msaFastaTag = document.createElement('a');
var msafastalink = "/results/{{sessionid}}/files/sequences_aln.fasta";

csvTag.setAttribute('href', csvlink);
//csvTag.setAttribute('target', '_blank');
csvTag.setAttribute('class', 'csvdl');
csvTag.innerHTML = "[Download CSV]";
fastaTag.setAttribute('href', fastalink);
fastaTag.setAttribute('target', '_blank');
fastaTag.setAttribute('class', 'fastadl');
fastaTag.innerHTML = "[Download FASTA]"
msaFastaTag.setAttribute('href', msafastalink);
msaFastaTag.setAttribute('target', '_blank');
msaFastaTag.innerHTML = "[Download MSA]";
msaTag.setAttribute('href', msalink);
msaTag.setAttribute('target', '_blank');
msaTag.innerHTML = "[View MSA]";


navigate.appendChild(csvTag)
navigate.appendChild(fastaTag)
navigate.appendChild(msaFastaTag)
navigate.appendChild(msaTag)

var rows = document.getElementsByTagName('tr');

for (var i = 1; i < rows.length; i++)	{

	var seqID = rows[i].getElementsByTagName('td')[0];
	var rxnID = rows[i].getElementsByTagName('td')[3];

	var seqlink = "//www.uniprot.org/uniprot/" + rows[i].getElementsByTagName('td')[0].innerHTML;

	var rxnlink = "http://www.metanetx.org/cgi-bin/mnxweb/equa_info?equa=" + rows[i].getElementsByTagName('td')[3].innerHTML;

	var aTag = document.createElement('a');
	var bTag = document.createElement('a');
	

	aTag.setAttribute('href', seqlink);
	aTag.setAttribute('target', '_blank');
	bTag.setAttribute('href', rxnlink);
	bTag.setAttribute('target', '_blank');

	aTag.innerHTML = rows[i].getElementsByTagName('td')[0].innerHTML;
	bTag.innerHTML = rows[i].getElementsByTagName('td')[3].innerHTML;

	seqID.replaceChild(aTag, seqID.childNodes[0]);
	rxnID.replaceChild(bTag, rxnID.childNodes[0]);

}
</script>

